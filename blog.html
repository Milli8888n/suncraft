<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Suncraft</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./styles.css">
    <link rel="icon" type="image/x-icon" href="./sun_images_home/logo_doc1.png">
    <!-- Google Translate -->
    <script type="text/javascript">
        // Hàm thiết lập cookie
        function setCookie(name, value, days) {
            var expires = "";
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        // Hàm lấy giá trị cookie
        function getCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Hàm chuyển đổi ngôn ngữ
        function switchLanguage() {
            console.log("Đang chuyển đổi ngôn ngữ...");
            var lang = getCookie('googtrans');
            console.log("Cookie hiện tại: " + lang);
            
            if (!lang || lang === '/vi/vi' || lang === '/auto/vi') {
                // Chuyển sang tiếng Anh
                console.log("Chuyển sang tiếng Anh");
                setCookie('googtrans', '/vi/en', 1);
                location.reload();
            } else {
                // Chuyển về tiếng Việt
                console.log("Chuyển về tiếng Việt");
                setCookie('googtrans', '/vi/vi', 1);
                location.reload();
            }
        }
        
        // Hàm khởi tạo Google Translate
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'vi',
                includedLanguages: 'en,vi',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');

            // Kiểm tra cookie và cập nhật nút ngôn ngữ
            var lang = getCookie('googtrans');
            var langButton = document.getElementById('language-toggle');
            if (langButton) {
                if (lang === '/vi/en') {
                    langButton.textContent = 'VI';
                } else {
                    langButton.textContent = 'EN';
                }
            }
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <style>
        /* Ẩn phần tử Google Translate */
        .goog-te-banner-frame.skiptranslate,
        .goog-te-gadget-icon,
        .goog-te-menu-value span {
            display: none !important;
        }
        
        .goog-te-gadget-simple {
            background-color: transparent !important;
            border: none !important;
            padding: 0 !important;
            font-size: 0 !important;
            line-height: 0 !important;
        }
        
        #google_translate_element {
            position: absolute;
            top: -1000px;
            opacity: 0;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        body {
            top: 0 !important;
        }
        
        .skiptranslate {
            opacity: 0;
        }
        
        .navbar-compact {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
            margin-top: 0;
            min-height: 60px;
            display: flex;
            align-items: center;
        }
        .navbar-compact .navbar-brand {
            padding: 0;
            display: flex;
            align-items: center;
            height: 100%;
        }
        .navbar-compact .navbar-brand img {
            width: 75px;
            height: 70px;
            margin-top: 0;
            margin-bottom: 0;
            object-fit: contain;
        }
        .navbar-compact .nav-link {
            padding-top: 0.25rem !important;
            padding-bottom: 0.25rem !important;
            font-size: 0.9rem;
        }
        .navbar-compact .navbar-nav {
            gap: 0.4rem;
        }
        .navbar-compact .btn-link {
            padding: 0.25rem;
        }
        .navbar-compact .btn-outline-primary {
            padding: 0.25rem 0.75rem;
            font-size: 0.9rem;
        }
        
        /* Ẩn thanh Google Translate */
        .goog-te-banner-frame {
            display: none !important;
        }
        
        body {
            top: 0 !important;
        }
        
        /* CSS cho bài viết liên quan */
        #related-posts-container .card {
            height: 100%;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        #related-posts-container .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        #related-posts-container .card-body {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        
        #related-posts-container .card-text {
            flex-grow: 1;
            min-height: 60px;
        }
        
        #related-posts-container .card-img-top,
        #related-posts-container .blog-img {
            height: 200px;
            object-fit: cover;
        }
        
        #related-posts-container .card-title {
            min-height: 50px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* CSS căn chỉnh chung cho trang */
        html, body {
            overflow-x: hidden;
            width: 100%;
            margin: 0;
            padding: 0;
        }
        
        section, .container, .row {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        
        .section-padding {
            padding: 5rem 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .section-padding .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            justify-content: center;
        }
        
        /* Định dạng card và nút "Đọc tiếp" */
        .card {
            height: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .card-body {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .card-body .mt-auto {
            margin-top: auto !important;
            text-align: right;
        }
        
        .blog-card .card-body .mt-auto,
        .card .card-body .mt-auto {
            text-align: right;
            width: 100%;
        }
        
        /* Đảm bảo hình ảnh không bị tràn */
        img {
            max-width: 100%;
            height: auto;
        }
        
        /* Căn chỉnh form đăng ký */
        .footer-subscribe-form {
            margin: 0 auto;
            max-width: 100%;
        }
        
        /* Căn chỉnh mobile */
        @media (max-width: 992px) {
            .section-padding {
                padding: 3rem 0;
            }
            
            .container {
                padding-left: 15px;
                padding-right: 15px;
            }
        }
        
        /* Điều chỉnh navbar bám dính */
        .sticky-top {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1030;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        /* Thêm padding vào body để tránh nội dung bị che khuất bởi navbar cố định */
        body {
            padding-top: 85px;
        }
        
        /* Điều chỉnh vị trí logo trên màn hình nhỏ */
        @media (max-width: 991.98px) {
            .navbar > .container {
                position: relative;
            }
            .navbar-brand {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                margin: 0 !important;
                z-index: 1;
                height: 60px;
                display: flex;
                align-items: center;
                overflow: hidden;
            }
            .navbar-brand img {
                max-height: 55px;
                width: auto;
                object-fit: contain;
            }
            .navbar-toggler {
                display: none; /* Ẩn nút hamburger */
            }
            .navbar-collapse {
                display: none !important; /* Ẩn dropdown menu */
            }
        }
        
        /* Floating Action Button (FAB) */
        .fab-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1040;
            display: flex;
            flex-direction: column-reverse;
            align-items: flex-end;
        }
        
        .fab-main {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #900202;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .fab-main:hover {
            background: #a72020;
            transform: scale(1.1);
        }
        
        .fab-menu {
            position: absolute;
            bottom: 80px;
            right: 12px;
            display: none;
            flex-direction: column;
            gap: 10px;
            overflow: hidden;
        }
        
        .fab-menu.active {
            display: flex;
        }
        
        .fab-item {
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
            transform: translateY(20px);
            opacity: 0;
        }
        
        .fab-menu.active .fab-item {
            transform: translateY(0);
            opacity: 1;
        }
        
        .fab-menu.active .fab-item:nth-child(1) { transition-delay: 0.1s; }
        .fab-menu.active .fab-item:nth-child(2) { transition-delay: 0.2s; }
        .fab-menu.active .fab-item:nth-child(3) { transition-delay: 0.3s; }
        .fab-menu.active .fab-item:nth-child(4) { transition-delay: 0.4s; }
        .fab-menu.active .fab-item:nth-child(5) { transition-delay: 0.5s; }
        
        .fab-item-label {
            display: none; /* Ẩn nhãn */
        }
        
        .fab-item-button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #900202;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .fab-item-button:hover {
            background: #900202;
            color: white;
            transform: scale(1.1);
        }
        
        /* CSS cho các thiết bị nhỏ */
        @media (min-width: 992px) {
            .fab-container {
                display: none; /* Ẩn FAB trên thiết bị lớn */
            }
        }
        
        /* Đảm bảo FAB hiển thị luôn trên thiết bị di động */
        @media (max-width: 991.98px) {
            .fab-container {
                display: flex !important;
            }
        }
    </style>
</head>
<body>
    <div id="google_translate_element" style="display:none;"></div>
    <!-- Header -->
    <header class="sticky-top">
        <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom navbar-compact">
            <div class="container">
                <!-- Mobile Search and Cart -->
                <div class="d-flex d-lg-none align-items-center me-2">
                    <a href="#" class="btn btn-link text-primary me-1" id="mobileSearchBtn">
                        <i class="bi bi-search"></i>
                    </a>
                </div>
                
                <!-- Logo Center -->
                <a class="navbar-brand mx-auto d-flex justify-content-center" href="index.html">
                    <img src="./sun_images_home/logo_doc1.png" alt="Suncraft logo" style="width:75px;height:70px;">
                </a>
                
                <!-- Mobile Cart and User -->
                <div class="d-flex d-lg-none align-items-center me-2">
                    <a href="./Adm/log-in.html" class="btn btn-link text-primary">
                        <i class="bi bi-person"></i>
                    </a>
                </div>
                
                <!-- Ẩn nút hamburger trên mobile -->
                <button class="navbar-toggler d-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <!-- Giữ nguyên menu desktop -->
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Trang chủ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="sanpham.html">Sản phẩm</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="lienket.html">Liên kết</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="blog.html">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="lien_he.html">Liên hệ</a>
                        </li>
                    </ul>
                    <div class="d-none d-lg-flex align-items-center">
                        <a href="#" class="btn btn-link text-primary me-2" id="desktopSearchBtn">
                            <i class="bi bi-search"></i>
                        </a>
                        <a href="./Adm/log-in.html" class="btn btn-link text-primary me-2">
                            <i class="bi bi-person"></i>
                        </a>
                        <a href="#" class="btn btn-outline-primary d-none d-md-block" id="language-toggle">
                            EN
                        </a>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Search Bar (Hidden by default) -->
        <div class="search-container bg-white py-3 border-bottom" style="display: none;">
            <div class="container">
                <form action="#" method="get" class="search-form">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Tìm kiếm sản phẩm..." aria-label="Tìm kiếm">
                        <button class="btn btn-primary" type="submit">
                            <i class="bi bi-search"></i>
                        </button>
                        <button type="button" class="btn btn-outline-secondary ms-2 search-close">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </header>

    <!-- FAB (Floating Action Button) -->
    <div class="fab-container">
        <div class="fab-main" id="fab-toggle">
            <i class="bi bi-list fs-4"></i>
        </div>
        <div class="fab-menu" id="fab-menu">
            <div class="fab-item">
                <div class="fab-item-label">Trang chủ</div>
                <a href="index.html" class="fab-item-button" title="Trang chủ">
                    <i class="bi bi-house"></i>
                </a>
            </div>
            <div class="fab-item">
                <div class="fab-item-label">Sản phẩm</div>
                <a href="sanpham.html" class="fab-item-button" title="Sản phẩm">
                    <i class="bi bi-box"></i>
                </a>
            </div>
            <div class="fab-item">
                <div class="fab-item-label">Liên kết</div>
                <a href="lienket.html" class="fab-item-button" title="Liên kết">
                    <i class="bi bi-link"></i>
                </a>
            </div>
            <div class="fab-item">
                <div class="fab-item-label">Blog</div>
                <a href="blog.html" class="fab-item-button" title="Blog">
                    <i class="bi bi-journal-text"></i>
                </a>
            </div>
            <div class="fab-item">
                <div class="fab-item-label">Liên hệ</div>
                <a href="lien_he.html" class="fab-item-button" title="Liên hệ">
                    <i class="bi bi-chat"></i>
                </a>
            </div>
            <div class="fab-item">
                <div class="fab-item-label">Đăng nhập</div>
                <a href="./Adm/log-in.html" class="fab-item-button" title="Đăng nhập">
                    <i class="bi bi-person"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Blog Header -->
        <section class="py-5 bg-light">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <h1 class="serif-font fw-bold mb-3">Blog</h1>
                        <p class="lead text-muted">Khám phá kiến thức về nghệ thuật và văn hóa Việt Nam</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Blog Article -->
        <section class="section-padding">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <article class="blog-article" id="main-article">
                            <!-- Phần loading -->
                            <div class="text-center py-5 my-5" id="main-article-loading">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Đang tải...</span>
                                </div>
                                <p class="mt-3 text-muted">Đang tải bài viết mới nhất...</p>
                            </div>
                            
                            <!-- Nội dung bài viết -->
                            <div id="main-article-content-wrapper" style="display:none;">
                                <h2 class="serif-font fw-bold mb-3" id="main-article-title"></h2>
                                <div class="blog-meta mb-4">
                                    <span class="blog-date me-3"><i class="bi bi-calendar3 me-1"></i> <span id="main-article-date"></span></span>
                                    <span class="blog-category"><i class="bi bi-tag me-1"></i> <span id="main-article-category">Văn hóa</span></span>
                            </div>
                                
                                <div class="blog-featured-image mb-4 text-center">
                                    <img id="main-article-image" src="https://via.placeholder.com/800x400" alt="Bài viết mới nhất" class="img-fluid rounded shadow" style="max-height: 500px;">
                                </div>
                                
                                <div class="blog-content" id="main-article-content"></div>
                                
                                <div class="text-center my-4" id="main-article-read-more"></div>
                            
                            <div class="blog-tags mt-5">
                                <span class="me-2"><i class="bi bi-tags"></i> Tags:</span>
                                    <a href="#" class="badge bg-light text-primary me-1">Nghề thủ công</a>
                                    <a href="#" class="badge bg-light text-primary me-1">Văn hóa Việt Nam</a>
                                <a href="#" class="badge bg-light text-primary me-1">Suncraft</a>
                            </div>
                            
                            <div class="blog-share d-flex justify-content-end mt-4">
                                <span class="me-2">Chia sẻ:</span>
                                <a href="#" class="btn btn-sm btn-outline-primary rounded-circle me-1"><i class="bi bi-facebook"></i></a>
                                <a href="#" class="btn btn-sm btn-outline-primary rounded-circle me-1"><i class="bi bi-twitter"></i></a>
                                <a href="#" class="btn btn-sm btn-outline-primary rounded-circle me-1"><i class="bi bi-linkedin"></i></a>
                                <a href="#" class="btn btn-sm btn-outline-primary rounded-circle"><i class="bi bi-envelope"></i></a>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Related Articles -->
        <section class="section-padding bg-gold-light">
            <div class="container">
                <h3 class="serif-font fw-bold section-title mb-4">Bài viết liên quan</h3>
                <!-- Loading indicator for related posts -->
                <div id="related-posts-loading" class="text-center py-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Đang tải...</span>
                    </div>
                    <p class="mt-2 text-muted">Đang tải bài viết liên quan...</p>
                            </div>
                <div class="row g-4" id="related-posts-container">
                    <!-- Bài viết liên quan sẽ được tải động từ backend -->
                </div>
            </div>
        </section>

        <!-- Footer Section -->
        <footer class="bg-gold-light pt-5 pb-3">
            <div class="container">
                <div class="row g-4">
                    <div class="col-lg-4">
                        <div class="footer-brand mb-3">
                            <img src="./Suncraft_website_Inf/suncraft_logo/e6e59529-b1df-4676-a5b2-f3757e67957e.png" alt="Suncraft logo" style="width:120px;height:115px;" onerror="this.src='./logo_doc1.png'">
                        </div>
                        <p class="mb-4">Suncraft - Nơi hội tụ tinh hoa nghề thủ công Việt Nam, kết nối các nghệ nhân tài hoa với những người yêu thích nghệ thuật truyền thống.</p>
                        <div class="d-flex gap-3 mb-3">
                            <a href="https://www.facebook.com/share/1FVZwMHwFb/?mibextid=wwXIfr" class="social-link">
                                <i class="bi bi-facebook"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="bi bi-instagram"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="bi bi-youtube"></i>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <h5 class="footer-heading mb-3">Danh mục</h5>
                        <ul class="footer-links">
                            <li><a href="sanpham.html">Sơn mài</a></li>
                            <li><a href="sanpham.html">Lụa tơ tằm</a></li>
                            <li><a href="sanpham.html">Thổ cẩm</a></li>
                            <li><a href="sanpham.html">Gốm sứ</a></li>
                            <li><a href="sanpham.html">Đồ gỗ mỹ nghệ</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-2 col-md-6">
                        <h5 class="footer-heading mb-3">Liên kết</h5>
                        <ul class="footer-links">
                            <li><a href="index.html">Trang chủ</a></li>
                            <li><a href="blog.html">Blog</a></li>
                            <li><a href="lienket.html">Liên kết</a></li>
                            <li><a href="lien_he.html">Liên hệ</a></li>
                            <li><a href="#">Chính sách bảo hành</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-4 col-md-12">
                        <h5 class="footer-heading mb-3">Đăng ký nhận tin</h5>
                        <p class="mb-3">Đăng ký để nhận thông tin về sản phẩm mới và khuyến mãi</p>
                        <form class="footer-subscribe-form mb-3">
                            <div class="input-group">
                                <input type="email" class="form-control" placeholder="Email của bạn" aria-label="Email của bạn">
                                <button class="btn btn-primary" type="submit">Đăng ký</button>
                            </div>
                        </form>
                        <p class="small">Liên hệ: <a href="mailto:info@suncraft.vn">info@suncraft.vn</a></p>
                    </div>
                </div>
                <hr class="mt-4 mb-3">
                <div class="row align-items-center">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="small text-muted mb-md-0">© 2025 Suncraft. Tất cả quyền được bảo lưu.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <ul class="list-inline mb-0 small">
                            <li class="list-inline-item"><a href="#" class="text-muted">Điều khoản sử dụng</a></li>
                            <li class="list-inline-item"><span class="text-muted">•</span></li>
                            <li class="list-inline-item"><a href="#" class="text-muted">Chính sách bảo mật</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <!-- Modal Bài Viết -->
    <div class="modal fade" id="postModal" tabindex="-1" aria-labelledby="postModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header border-bottom-0 pb-0">
                    <h5 class="modal-title serif-font fw-bold" id="postModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-2">
                    <div class="post-meta mb-3">
                        <span class="post-date me-3"><i class="bi bi-calendar3 me-1"></i> <span id="postModalDate"></span></span>
                        <span class="post-category"><i class="bi bi-tag me-1"></i> <span id="postModalCategory"></span></span>
                    </div>
                    <div id="postModalImage" class="text-center mb-4"></div>
                    <div id="postModalContent" class="post-content"></div>
                </div>
                <div class="modal-footer justify-content-between">
                    <div class="blog-tags">
                        <span class="me-2"><i class="bi bi-tags"></i> Tags:</span>
                        <div id="postModalTags" class="d-inline"></div>
                    </div>
                    <div class="blog-share">
                        <span class="me-2">Chia sẻ:</span>
                        <a href="#" class="btn btn-sm btn-outline-primary rounded-circle me-1"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="btn btn-sm btn-outline-primary rounded-circle me-1"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="btn btn-sm btn-outline-primary rounded-circle"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>
                <div class="modal-footer justify-content-center border-top-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- Custom JavaScript -->
    <script>
        $(document).ready(function () {
            // Khởi tạo AOS animation
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true,
            mirror: false
            });
            
            // Thêm sự kiện khi modal đóng
            $('#postModal').on('hidden.bs.modal', function () {
                console.log('Modal đã đóng');
                // Xóa nội dung để tránh xung đột khi mở lại
                $('#postModalContent').html('');
            });
            
            // Kiểm tra API trước khi tải bài viết
            $('#main-article-loading').show();
            $('#related-posts-loading').show();
            
            checkApiStatus()
                .then(() => {
                    // API đang hoạt động, tải bài viết
                    loadAllPosts();
                })
                .catch(error => {
                    // API không hoạt động, hiển thị thông báo lỗi
                    $('#main-article-content-wrapper').html(`
                        <div class="alert alert-danger">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            Không thể kết nối đến máy chủ. Vui lòng thử lại sau.<br>
                            Lỗi: ${error.message}
                        </div>
                    `).show();
                    
                    $('#related-posts-container').html(`
                        <div class="col-12">
                            <div class="alert alert-danger">
                                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                Không thể tải bài viết liên quan. Máy chủ không phản hồi.
                            </div>
                        </div>
                    `);
                    
                    // Ẩn phần loading
                    $('#main-article-loading').hide();
                    $('#related-posts-loading').hide();
                });
            
            // Tiếp tục với kiểm tra session
            $.get('/suncraft/api/session/current_post', function(data) {
                if (data && data.id) {
                    // Hiển thị bài viết chi tiết từ session
                    displaySinglePost(data);
                    
                    // Tải các bài viết liên quan
                    loadRelatedPosts();
                }
            }).fail(function(error) {
                console.log("Không thể tải bài viết từ session:", error.status);
            });

            // Hàm hiển thị bài viết đơn lẻ từ session
            function displaySinglePost(post) {
                console.log("Hiển thị bài viết từ session:", post.title);
                // Lưu ID của bài viết chính vào element để tránh hiển thị trùng lặp
                $('#main-article').attr('data-post-id', post.id);
                // Sử dụng hàm hiển thị chính có sẵn
                displayMainArticle(post);
            }

            // Tải tất cả bài viết từ API
            function loadAllPosts() {
                // Hiển thị phần loading
                $('#main-article-loading').show();
                $('#related-posts-loading').show();
                
                $.ajax({
                    url: '/suncraft/api/posts.php',
                    method: 'GET',
                    success: function(response) {
                        let posts = [];
                        
                        // Kiểm tra cấu trúc dữ liệu response
                        if (Array.isArray(response)) {
                            // Nếu response là mảng, sử dụng trực tiếp
                            posts = response;
                        } else if (response && response.posts && Array.isArray(response.posts)) {
                            // Nếu response có thuộc tính posts là mảng
                            posts = response.posts;
                        }
                        
                        console.log("API Response:", response);
                        console.log("Posts sau khi xử lý:", posts);
                        
                        if (posts.length > 0) {
                            // Sắp xếp bài viết theo thứ tự giảm dần của thời gian tạo
                            const sortedPosts = posts.sort((a, b) => {
                                return new Date(b.created_at) - new Date(a.created_at);
                            });
                            
                            // Hiển thị bài viết mới nhất ở phần chính
                            const latestPost = sortedPosts[0];
                            displayMainArticle(latestPost);
                            
                            // Lấy các bài viết còn lại cho phần related posts (tối đa 3 bài)
                            const relatedPosts = sortedPosts.slice(1, 4);
                            renderRelatedPosts(relatedPosts);
                        } else {
                            // Nếu không có bài viết nào, hiển thị một thông báo
                            displayMainArticle({
                                title: "Chưa có bài viết nào",
                                created_at: new Date().toISOString(),
                                content: "Hiện tại chưa có bài viết nào được đăng. Vui lòng quay lại sau.",
                                image_path: 'https://via.placeholder.com/800x400'
                            });
                            
                            // Tạo dummy posts cho phần related
                            const dummyPosts = [
                                {
                                    id: 0,
                                    title: "Bài viết đang cập nhật",
                                    created_at: new Date().toISOString(),
                                    content: "Nội dung đang được cập nhật. Vui lòng quay lại sau.",
                                    image_path: 'https://via.placeholder.com/400x300'
                                },
                                {
                                    id: 0,
                                    title: "Bài viết đang cập nhật",
                                    created_at: new Date().toISOString(),
                                    content: "Nội dung đang được cập nhật. Vui lòng quay lại sau.",
                                    image_path: 'https://via.placeholder.com/400x300'
                                },
                                {
                                    id: 0,
                                    title: "Bài viết đang cập nhật",
                                    created_at: new Date().toISOString(),
                                    content: "Nội dung đang được cập nhật. Vui lòng quay lại sau.",
                                    image_path: 'https://via.placeholder.com/400x300'
                                }
                            ];
                            renderRelatedPosts(dummyPosts);
                        }
                        
                        // Ẩn phần loading
                        $('#main-article-loading').hide();
                        $('#related-posts-loading').hide();
                    },
                    error: function(xhr, status, error) {
                        console.error("Lỗi khi tải bài viết:", error);
                        console.log("Thông tin lỗi chi tiết:", xhr.responseText);
                        
                        // Hiển thị thông báo lỗi
                        displayMainArticle({
                            title: "Không thể tải bài viết",
                            created_at: new Date().toISOString(),
                            content: "Đã xảy ra lỗi khi tải bài viết. Vui lòng thử lại sau.<br>Lỗi: " + error,
                            image_path: 'https://via.placeholder.com/800x400'
                        });
                        
                        // Tạo dummy posts cho phần related
                        const dummyPosts = [
                            {
                                id: 0,
                                title: "Bài viết đang cập nhật",
                                created_at: new Date().toISOString(),
                                content: "Nội dung đang được cập nhật. Vui lòng quay lại sau.",
                                image_path: 'https://via.placeholder.com/400x300'
                            },
                            {
                                id: 0,
                                title: "Bài viết đang cập nhật",
                                created_at: new Date().toISOString(),
                                content: "Nội dung đang được cập nhật. Vui lòng quay lại sau.",
                                image_path: 'https://via.placeholder.com/400x300'
                            },
                            {
                                id: 0,
                                title: "Bài viết đang cập nhật",
                                created_at: new Date().toISOString(),
                                content: "Nội dung đang được cập nhật. Vui lòng quay lại sau.",
                                image_path: 'https://via.placeholder.com/400x300'
                            }
                        ];
                        renderRelatedPosts(dummyPosts);
                        
                        // Ẩn phần loading
                        $('#main-article-loading').hide();
                        $('#related-posts-loading').hide();
                    }
                });
            }
            
            // Hiển thị bài viết mới nhất ở phần chính
            function displayMainArticle(post) {
                if (!post) {
                    console.error("Không có dữ liệu bài viết để hiển thị");
                    $('#main-article-content-wrapper').html(`
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle me-2"></i>
                            Không thể hiển thị bài viết. Dữ liệu không hợp lệ.
                        </div>
                    `).show();
                    $('#main-article-loading').hide();
                    return;
                }
                
                try {
                    // Cập nhật thông tin bài viết
                    $('#main-article-title').text(post.title || "Không có tiêu đề");
                    $('#main-article-date').text(formatDate(post.created_at) || "Không có ngày");
                    $('#main-article-category').text(post.category_name || "Văn hóa");
                    $('#main-article-content').html(post.content || "Không có nội dung");
                    
                    // Bỏ nút đọc tiếp
                    $('#main-article-read-more').html('');
                    
                    // Cập nhật hình ảnh
                    const mainImage = $('#main-article-image');
                    if (post.image_path) {
                        mainImage.attr('src', post.image_path);
                        mainImage.attr('alt', post.title);
                    } else {
                        mainImage.attr('src', 'https://via.placeholder.com/800x400');
                        mainImage.attr('alt', "Ảnh mặc định");
                    }
                    
                    // Thêm xử lý lỗi cho hình ảnh
                    mainImage.off('error').on('error', function() {
                        $(this).attr('src', 'https://via.placeholder.com/800x400');
                    });
                    
                    // Ẩn loading và hiển thị nội dung
                    $('#main-article-loading').hide();
                    $('#main-article-content-wrapper').show();
                    
                    // Lưu id bài viết vào article trong trường hợp hiển thị từ API
                    if (post.id) {
                        $('#main-article').attr('data-post-id', post.id);
                    }
                    
                    console.log("Hiển thị bài viết thành công:", post.title);
                } catch (error) {
                    console.error("Lỗi khi hiển thị bài viết:", error);
                    $('#main-article-content-wrapper').html(`
                        <div class="alert alert-danger">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>
                            Đã xảy ra lỗi khi hiển thị bài viết: ${error.message}
                        </div>
                    `).show();
                    $('#main-article-loading').hide();
                }
            }
            
            // Format date để hiển thị
            function formatDate(dateString) {
                if (!dateString) return "Không có ngày";
                
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return "Ngày không hợp lệ";
                
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                
                return `${day}/${month}/${year}`;
            }

            // Tải danh sách bài viết chính
            function loadPosts() {
                // Chỉ hiển thị loading khi không có dữ liệu
                if ($('#main-article').children().length <= 1) {
                    $('#article-loading').show();
                }
            }

            // Tải các bài viết liên quan từ session
            function loadRelatedPosts() {
                $.get('/suncraft/api/related-posts.php', function(posts) {
                    if (posts && posts.length > 0) {
                        // Lọc bỏ bài viết trùng với bài viết chính
                        const mainPostId = parseInt($('#main-article').attr('data-post-id') || '0');
                        const filteredPosts = posts.filter(post => post.id !== mainPostId);
                        updateRelatedPosts(filteredPosts);
                    } else {
                        // Nếu không có bài viết liên quan trong session, tải 3 bài viết gần đây nhất
                        $.get('/suncraft/api/posts.php', function(allPosts) {
                            if (allPosts && allPosts.length > 0) {
                                // Lấy ID bài viết chính hiện tại
                                const mainPostId = parseInt($('#main-article').attr('data-post-id') || '0');
                                
                                // Lọc bỏ bài viết chính khỏi danh sách bài viết liên quan
                                const filteredPosts = allPosts.filter(post => post.id !== mainPostId);
                                
                                // Chỉ lấy 3 bài viết đầu tiên
                                const recentPosts = filteredPosts.slice(0, 3);
                                updateRelatedPosts(recentPosts);
                            }
                        });
                    }
                });
            }

            // Cập nhật phần bài viết liên quan trên trang
            function updateRelatedPosts(posts) {
                const relatedPostsContainer = $('#related-posts-container');
                if (relatedPostsContainer.length) {
                    relatedPostsContainer.empty();
                    
                    // Thêm từng bài viết vào row
                    posts.forEach(post => {
                        const postCard = `
                            <div class="col-md-4 mb-4">
                                <div class="card h-100 border-0 shadow-sm">
                                    <img src="${post.image_path || 'https://via.placeholder.com/400x300'}" class="card-img-top" alt="${post.title}" onerror="this.src='https://via.placeholder.com/400x300'">
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title">${post.title}</h5>
                                        <p class="card-text small text-muted">${formatDate(post.created_at)}</p>
                                        <p class="card-text text-muted">${truncateText(post.content || 'Không có nội dung', 120)}</p>
                                        <div class="mt-auto text-end w-100">
                                            <a href="javascript:void(0)" onclick="setCurrentPost(${post.id || 0})" class="link-primary d-inline-flex align-items-center">
                                                Đọc tiếp
                                                <i class="bi bi-chevron-right ms-1"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        relatedPostsContainer.append(postCard);
                    });
                }
            }

            // Hiển thị các bài viết liên quan lên giao diện
            function renderRelatedPosts(posts) {
                try {
                    const container = $('#related-posts-container');
                    container.empty();
                    
                    if (!posts || !Array.isArray(posts) || posts.length === 0) {
                        container.html(`
                            <div class="col-12 text-center">
                                <div class="alert alert-light">
                                    Không có bài viết liên quan.
                                </div>
                            </div>
                        `);
                        return;
                    }
                    
                    // Tạo HTML cho mỗi bài viết
                    posts.forEach(function(post, index) {
                        try {
                            const delay = (index + 1) * 100;
                            const postHTML = `
                                <div class="col-md-4" data-aos="fade-up" data-aos-delay="${delay}">
                                    <div class="card blog-card h-100 border-0">
                                        <div class="blog-img-wrapper">
                                            <a href="javascript:void(0)" onclick="setCurrentPost(${post.id || 0})" class="overflow-hidden d-block">
                                                <img src="${post.image_path || 'https://via.placeholder.com/400x300'}" class="blog-img" alt="${post.title || 'Bài viết'}" onerror="this.src='https://via.placeholder.com/400x300'">
                                            </a>
                                        </div>
                                        <div class="card-body p-3 p-md-4 d-flex flex-column">
                                            <p class="blog-date small">${formatDate(post.created_at) || 'Không có ngày'}</p>
                                            <a href="javascript:void(0)" onclick="setCurrentPost(${post.id || 0})" class="text-decoration-none text-dark">
                                                <h5 class="card-title serif-font">${post.title || 'Không có tiêu đề'}</h5>
                                            </a>
                                            <p class="card-text text-muted">${truncateText(post.content || 'Không có nội dung', 120)}</p>
                                            <div class="mt-auto text-end w-100">
                                                <a href="javascript:void(0)" onclick="setCurrentPost(${post.id || 0})" class="link-primary d-inline-flex align-items-center">
                                                    Đọc tiếp
                                                    <i class="bi bi-chevron-right ms-1"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                            container.append(postHTML);
                        } catch (itemError) {
                            console.error(`Lỗi khi hiển thị bài viết thứ ${index}:`, itemError);
                        }
                    });
                    
                    // Khởi tạo lại AOS để các phần tử mới có animation
                    AOS.refresh();
                    console.log("Đã hiển thị", posts.length, "bài viết liên quan");
                } catch (error) {
                    console.error("Lỗi khi hiển thị các bài viết liên quan:", error);
                    $('#related-posts-container').html(`
                        <div class="col-12">
                            <div class="alert alert-danger">
                                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                                Đã xảy ra lỗi khi tải bài viết liên quan: ${error.message}
                            </div>
                        </div>
                    `);
                } finally {
                    // Ẩn loading indicator
                    $('#related-posts-loading').hide();
                }
            }

            // Cắt ngắn văn bản thành độ dài cụ thể
            function truncateText(text, maxLength) {
                if (!text) return '';
                // Loại bỏ thẻ HTML
                const plainText = text.replace(/<[^>]*>?/gm, '');
                
                if (plainText.length <= maxLength) return plainText;
                
                return plainText.substr(0, maxLength) + '...';
            }

            // Thêm hàm kiểm tra API status
            function checkApiStatus() {
                return new Promise((resolve, reject) => {
                    $.ajax({
                        url: '/suncraft/api/status.php',
                        method: 'GET',
                        timeout: 5000,
                        success: function(response) {
                            console.log("API Status:", response);
                            resolve(true);
                        },
                        error: function(xhr, status, error) {
                            if (status === 'timeout') {
                                console.error("API kiểm tra timeout");
                                reject(new Error("Máy chủ không phản hồi"));
                            } else if (xhr.status === 404) {
                                // Endpoint không tồn tại, nhưng có thể server đang chạy
                                console.log("API status endpoint không tồn tại, tiếp tục với giả định server đang chạy");
                                resolve(true);
                            } else {
                                console.error("Lỗi khi kiểm tra API:", error);
                                reject(new Error(error));
                            }
                        }
                    });
                });
            }
        });
        
        // Biến lưu trữ modal
        let postModal;
        
        // Hiển thị bài viết trong modal
        window.showPostModal = function(postId, slug) {
            try {
                console.log("Gọi showPostModal với ID:", postId, "slug:", slug);
                
                // Đảm bảo element modal tồn tại
                const modalElement = document.getElementById('postModal');
                if (!modalElement) {
                    console.error("Không tìm thấy element #postModal trong DOM");
                    alert("Không thể hiển thị chi tiết bài viết. Lỗi kỹ thuật.");
                    return;
                }
                
                // Nếu modal chưa được khởi tạo, khởi tạo nó
                if (!postModal) {
                    try {
                        console.log("Khởi tạo modal mới");
                        postModal = new bootstrap.Modal(modalElement, {
                            backdrop: true,
                            keyboard: true,
                            focus: true
                        });
                    } catch (error) {
                        console.error("Lỗi khởi tạo Bootstrap modal:", error);
                        alert("Không thể hiển thị chi tiết bài viết. Lỗi Bootstrap.");
                        return;
                    }
                }
                
                // Hiển thị loading trong modal
                $('#postModalTitle').text('Đang tải...');
                $('#postModalDate').text('');
                $('#postModalCategory').text('');
                $('#postModalImage').html('');
                $('#postModalContent').html('<div class="text-center py-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Đang tải...</span></div></div>');
                $('#postModalTags').html('');
                
                // Hiển thị modal
                console.log("Hiển thị modal");
                postModal.show();
                
                // Nếu có ID hoặc slug, lấy thông tin bài viết từ API
                if (postId || slug) {
                    let apiUrl = '';
                    if (postId && postId > 0) {
                        apiUrl = `/suncraft/api/posts.php?id=${postId}`;
                    } else if (slug) {
                        apiUrl = `/suncraft/api/posts.php?slug=${slug}`;
                    }
                    
                    if (apiUrl) {
                        // Lấy thông tin bài viết từ API
                        $.get(apiUrl, function(response) {
                            let post = null;
                            
                            // Kiểm tra các định dạng dữ liệu có thể có
                            if (response && response.posts && Array.isArray(response.posts) && response.posts.length > 0) {
                                // Định dạng mới - { posts: [...] }
                                if (postId) {
                                    // Lấy bài viết theo ID
                                    post = response.posts[0];
                                } else if (slug) {
                                    // Lấy bài viết theo slug
                                    post = response.posts.find(p => p.slug === slug) || response.posts[0];
                                }
                            } else if (response && response.post) {
                                // Định dạng cũ - { post: {...} }
                                post = response.post;
                            } else if (Array.isArray(response) && response.length > 0) {
                                // Nếu response là mảng
                                if (slug) {
                                post = response.find(p => p.slug === slug) || response[0];
                            } else {
                                    post = response[0];
                                }
                            } else if (response && response.id) {
                                // Nếu response là đối tượng bài viết
                                post = response;
                            }
                            
                            if (post) {
                                // Hiển thị bài viết trong modal
                                displayPost({
                                    title: post.title,
                                    created_at: post.created_at,
                                    category: post.category_name || "Không có danh mục",
                                    image_path: post.image_path,
                                    content: post.content,
                                    tags: ["Nghề thủ công", "Văn hóa Việt Nam", "Lễ hội truyền thống"]
                                });
                            } else {
                                // Không tìm thấy bài viết, hiển thị bài viết mặc định
                                displayDefaultPost();
                            }
                        }).fail(function() {
                            // Nếu API lỗi, hiển thị bài viết mặc định
                            displayDefaultPost();
                        });
                    } else {
                        // Không có ID hoặc slug, hiển thị bài viết mặc định
                        displayDefaultPost();
                    }
                } else {
                    // Không có ID hoặc slug, hiển thị bài viết mặc định
                    displayDefaultPost();
                }
            } catch (error) {
                console.error("Lỗi khi hiển thị bài viết trong modal:", error);
                alert("Có lỗi xảy ra khi tải bài viết. Vui lòng thử lại sau.");
            }
        };
        
        // Hiển thị bài viết mặc định trong modal
        function displayDefaultPost() {
            const fixedPost = {
                title: $(".blog-article h2").text(),
                created_at: new Date().toISOString(),
                category: $(".blog-category").text().replace("Văn hóa", "Văn hóa"),
                image_path: $(".blog-featured-image img").attr("src"),
                content: $(".blog-content").html(),
                tags: ["Phụ nữ Việt", "Sống xanh", "Văn hóa", "Suncraft"]
            };
            
            displayPost(fixedPost);
        }
        
        // Hiển thị bài viết trong modal
        function displayPost(post) {
            // Cập nhật nội dung modal với thông tin bài viết
            $('#postModalTitle').text(post.title);
            $('#postModalDate').text(formatDate(post.created_at));
            $('#postModalCategory').text(post.category);
            
            // Cập nhật hình ảnh
            if(post.image_path) {
                $('#postModalImage').html(`<img src="${post.image_path}" class="img-fluid rounded" alt="${post.title}" onerror="this.src='https://via.placeholder.com/800x400'">`);
            } else {
                $('#postModalImage').html(`<img src="https://via.placeholder.com/800x400" class="img-fluid rounded" alt="Placeholder">`);
            }
            
            // Cập nhật nội dung
            $('#postModalContent').html(post.content);
            
            // Cập nhật tags
            if(post.tags && post.tags.length > 0) {
                const tagsHtml = post.tags.map(tag => 
                    `<a href="#" class="badge bg-light text-primary me-1">${tag}</a>`
                ).join('');
                $('#postModalTags').html(tagsHtml);
            } else {
                $('#postModalTags').html('<span class="text-muted">Không có tags</span>');
            }
        }
        
        // Hàm định dạng ngày tháng
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('vi-VN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // Chuyển hướng đến trang chi tiết bài viết
        function setCurrentPost(postId) {
            // Lấy thông tin bài viết từ API
            $.get(`/suncraft/api/posts.php?id=${postId}`, function(response) {
                // Kiểm tra cấu trúc dữ liệu response
                let post = null;
                
                if (response && response.posts && Array.isArray(response.posts) && response.posts.length > 0) {
                    // Định dạng mới: { posts: [...] }
                    post = response.posts[0];
                } else if (response && response.post) {
                    // Định dạng cũ: { post: {...} }
                    post = response.post;
                } else if (Array.isArray(response) && response.length > 0) {
                    // Nếu response là mảng
                    post = response[0];
                } else if (response && response.id) {
                    // Nếu response là đối tượng bài viết
                    post = response;
                }
                
                if (post && post.id) {
                    // Trực tiếp hiển thị modal thay vì cố gắng đặt session
                    console.log("Hiển thị modal cho bài viết:", post.title);
                    showPostModal(post.id, post.slug);
                } else {
                    // Không tìm thấy bài viết, hiển thị thông báo lỗi
                    alert('Không tìm thấy bài viết');
                }
            }).fail(function() {
                // Nếu API lỗi, hiển thị thông báo lỗi
                alert('Có lỗi xảy ra khi tải bài viết');
            });
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', function() {
            const searchContainer = document.querySelector('.search-container');
            const desktopSearchBtn = document.getElementById('desktopSearchBtn');
            const mobileSearchBtn = document.getElementById('mobileSearchBtn');
            const searchCloseBtn = document.querySelector('.search-close');
            
            // Open search bar when search button is clicked
            desktopSearchBtn.addEventListener('click', function(e) {
                e.preventDefault();
                searchContainer.style.display = 'block';
                searchContainer.querySelector('input').focus();
            });
            
            mobileSearchBtn.addEventListener('click', function(e) {
                e.preventDefault();
                searchContainer.style.display = 'block';
                searchContainer.querySelector('input').focus();
            });
            
            // Close search bar when close button is clicked
            searchCloseBtn.addEventListener('click', function() {
                searchContainer.style.display = 'none';
            });
            
            // Handle search form submission
            document.querySelector('.search-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const searchTerm = this.querySelector('input').value.trim();
                if (searchTerm) {
                    // Redirect to search results page with search term
                    window.location.href = 'search.html?q=' + encodeURIComponent(searchTerm);
                }
            });
        });

        // FAB Menu Toggle - Sửa lại để hoạt động đúng
        document.addEventListener('DOMContentLoaded', function() {
            const fabToggle = document.getElementById('fab-toggle');
            const fabMenu = document.getElementById('fab-menu');
            
            if (fabToggle && fabMenu) {
                fabToggle.addEventListener('click', function(event) {
                    event.stopPropagation(); // Ngăn sự kiện click lan ra ngoài
                    fabMenu.classList.toggle('active');
                    
                    // Rotate icon when active
                    if (fabMenu.classList.contains('active')) {
                        this.innerHTML = '<i class="bi bi-x fs-4"></i>';
                    } else {
                        this.innerHTML = '<i class="bi bi-list fs-4"></i>';
                    }
                });
                
                // Close menu when clicking elsewhere
                document.addEventListener('click', function(event) {
                    if (!event.target.closest('.fab-container')) {
                        fabMenu.classList.remove('active');
                        fabToggle.innerHTML = '<i class="bi bi-list fs-4"></i>';
                    }
                });
                
                // Ngăn chặn sự kiện click trên các item không lan ra
                const fabItems = document.querySelectorAll('.fab-item');
                fabItems.forEach(item => {
                    item.addEventListener('click', function(event) {
                        event.stopPropagation();
                    });
                });
            } else {
                console.log('FAB elements not found');
            }
        });

        // Chức năng chuyển đổi ngôn ngữ
        document.addEventListener('DOMContentLoaded', function() {
            var languageToggle = document.getElementById('language-toggle');
            if (languageToggle) {
                languageToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log("Nút ngôn ngữ được nhấp");
                    switchLanguage();
                });
                
                // Cập nhật hiển thị nút dựa trên ngôn ngữ hiện tại
                var lang = getCookie('googtrans');
                if (lang === '/vi/en') {
                    languageToggle.textContent = 'VI';
                } else {
                    languageToggle.textContent = 'EN';
                }
            }
        });
    </script>
</body>
</html>